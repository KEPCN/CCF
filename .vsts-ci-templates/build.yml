parameters:
  cmake_args: ''

steps:
- script: |
    cat /proc/cpuinfo
  displayName: /proc/cpuinfo
  condition: succeededOrFailed()

- task: CMake@1
  displayName: CMake
  inputs:
    cmakeArgs: '-GNinja -DTARGET=sgx .. ${{ parameters.cmake_args }}'

- script: cmake .. -L
  displayName: CMake config
  workingDirectory: build

- script: ninja
  displayName: Ninja
  workingDirectory: build
